<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<TITLE>厂商结算</TITLE>
	<meta http-equiv="Pragma" content="no-cache">
	<link rel="stylesheet" type="text/css" href="../css/jwdf_main.css">
	<link rel="stylesheet" type="text/css" href="../css/jwdf_swin.css">
	<link rel="stylesheet" type="text/css" href="../css/jwdf_cal.css">
	<SCRIPT language="JavaScript" type="text/javascript" src="../js/jwdf_util.js"></SCRIPT>
	<SCRIPT language="JavaScript" type="text/javascript" src="../js/jwdf_xml.js"></SCRIPT>
	<SCRIPT language="JavaScript" type="text/javascript" src="../js/jwdf_view.js"></SCRIPT>
	<SCRIPT language="JavaScript" type="text/javascript" src="../js/jwdf_swin.js"></SCRIPT>
	<SCRIPT language="JavaScript" type="text/javascript" src="../js/jwdf_cal.js"></SCRIPT>
	<script language=javascript>

		<!------------------选择手机厂商---------------------------->
		var cur_mfid = "";
		var mfwindow = new SimpleWindow();
		function showMF(){
			mfwindow.Create('mf_window','选择内容提供商',600,400,mfHTML);
			mfwindow.Show();
			listPageURL.put('mflist','../GetMFList.do?index=#index#');
			openPage('mflist','1');
		}
		
		function selectMF(){
			if(listCurrentKey.get('mflist') == ""){
				alert("没有选择手机厂商！");
				return;
			}else{
				sendG("../GetMFInfo.do?PartnerId="+listCurrentKey.get('mflist'),getMFDetail);
			}
		}
		
		function getMFDetail(cartXML){
			var cart = cartXML.getElementsByTagName("result")[0];
			var code = cart.getElementsByTagName("code")[0].firstChild.nodeValue;
			var detail = cart.getElementsByTagName("detail")[0];
			var fields = detail.getElementsByTagName("field");
			for(i=0;i<fields.length;i++){
				var name = fields[i].getElementsByTagName("name")[0].firstChild.nodeValue;
				var value = "";
				if(fields[i].getElementsByTagName("value")[0].firstChild != null){
					value = fields[i].getElementsByTagName("value")[0].firstChild.nodeValue;
				}
				if(name == "编号"){
					cur_mfid = value;
					SearchForm.SelMF.value = value;
				}
				if(name == "公司名称"){
					SearchForm.SelMFText.value = value;
				}
			}
			mfwindow.Close();
		}

		<!------------------显示查询结果---------------------->
		function showBill(){
			if(SearchForm.Month.value==""){
				alert("请选择结算月份！")
				return false;  
			}
			if(SearchForm.Year.value==""){
				alert("请选择结算年份！")
				return false;  
			}
			listPageURL.put('billlist','../MfBillQuery.do?'+getP(SearchForm)+'&index=#index#');
			openPage('billlist','1');  
		}

      	<!---------------------------手机厂商查询列表---------------------------------->
		function searchMFByName(){
			listIndex.put('mflist','1');
			var mfName = SearchMFByName.value;
			listPageURL.put('mflist','../GetMFListByMFName.do?MFName='+encodeURIComponent(mfName)+'&index=#index#');
			listDetailURL.put('mflist','');
			listCurrentId.put('mflist','');
			listCurrentKey.put('mflist','');
			listDetailWidth.put('mflist','400');
			listDetailHeight.put('mflist','300');
			listListXSL.put('mflist','../xsl/jwdf_list.xsl');
			listDblClickEvent.put('mflist',selectMF);
			openPage('mflist','1');
		}
    
		<!------------------页面初始化---------------------->
		var updateHTML = "";
		var mfHTML = "";
		
		function init(){
			mfHTML = document.all["tb_mf"].innerHTML;
			document.all["tb_mf"].innerHTML = "";
			
			initList();
		}
		function initList(){
			listIndex.put('billlist','1');
			listPageURL.put('billlist','');
			listDetailURL.put('billlist','../GetMfBillInfo.do?MFId=#id#');
			listCurrentId.put('billlist','');
			listCurrentKey.put('billlist','');
			listDetailWidth.put('billlist','400');
			listDetailHeight.put('billlist','300');
			listListXSL.put('billlist','../xsl/jwdf_list.xsl');
			listDetailXSL.put('billlist','../xsl/jwdf_sdetail.xsl');

			listIndex.put('mflist','1');
			//listPageURL.put('mflist','../GetMFList.do?index=#index#');
			listDetailURL.put('mflist','');
			listCurrentId.put('mflist','');
			listCurrentKey.put('mflist','');
			listDetailWidth.put('mflist','300');
			listDetailHeight.put('mflist','320');
			listListXSL.put('mflist','../xsl/jwdf_list.xsl');
			listDetailXSL.put('mflist','');
			listDblClickEvent.put('mflist',selectMF);
		}
		<!------------------------------------------------------------->
	</script>
</head>

<body onload="init();">
	<!-- 页面标题 -->
	<table class="table_pagetitle" border="0" cellspacing="0" cellpadding="0" align="center">
	<tr>
		<td class="td_pagetitle" valign="middle">MF结算</td>
	</tr>
	</table>
	<!-- 查询条件 -->
	<table width="90%" border="0" cellspacing="0" cellpadding="0" align="center">
	<tr><td height="5"></td></tr>
	<tr>
		<td valign="middle" style="font-size:9pt;color:#4796ee;">
			<form method="POST" name="SearchForm" class="edit">
			<b>查询条件：</b>&nbsp;&nbsp;MF：<input type="text" class="input_edit"  name="SelMFText" readonly>
				<input type="hidden" name="SelMF">
				<a href="#" onclick="showMF();"><img src="../buttons/select_001.gif" width="48" height="18" border="0" align="middle" vspace="0" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			年份：<input class="input_edit" type="text" name="Year" style="width:80;" value="">
			<b>　　　　　</b>月份：<select name="Month"><option value="01">01</option>
			                                         <option value="02">02</option>
			                                         <option value="03">03</option>
			                                         <option value="04">04</option>
			                                         <option value="05">05</option>
			                                         <option value="06">06</option>
			                                         <option value="07">07</option>
			                                         <option value="08">08</option>
			                                         <option value="09">09</option>
			                                         <option value="10">10</option>
			                                         <option value="11">11</option>
			                                         <option value="12">12</option>
			                    </select>
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#" onclick="showBill();"><img src="../buttons/search_001.gif" width="48" height="18" border="0" align="top" vspace="1" /></a>
			</form>
		</td>
	</tr>
	<tr><td height="5"></td></tr>
	</table>

	<!-- 结算列表显示区域 -->
	<div align="center" id="billlist" style="width:100%; overflow-x:auto; overflow-y:auto; scrollbar-face-color:#efebef;">
	</div>

</body>
	<!-- 手机厂商列表显示区域 -->
	<div id="tb_mf" class="datainfo">
		<table width="90%" border="0" cellspacing="0" cellpadding="0" align="center">
			<tr>
				<td class="td_buttonbar" valign="middle" style="font-size:9pt;">搜索手机厂商：
					<input type="text" class="input_edit"  name="SearchMFByName">
					<a href="#" onclick="searchMFByName();"><img src="../buttons/search_003.gif" width="48" height="18" border="0" align="top" vspace="1" /></a>
				</td>
			</tr>
		</table>
		<div align="center" id="mflist" style="width:100%; overflow-x:auto; overflow-y:auto; scrollbar-face-color:#efebef;">
		</div>
	</div>
</html>
