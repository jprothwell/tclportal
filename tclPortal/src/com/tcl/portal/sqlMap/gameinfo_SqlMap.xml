<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="gameinfo" >
  <resultMap id="gameinfoResult" class="com.tcl.portal.domain.Gameinfo" >
    <result column="id" jdbcType="INTEGER" property="id" />
    <result column="gameName" jdbcType="VARCHAR" property="gamename" />
    <result column="detailInfo" jdbcType="VARCHAR" property="detailinfo" />
    <result column="kindId" jdbcType="INTEGER" property="kindid" />
    <result column="addTime" jdbcType="TIMESTAMP" property="addtime" />
    <result column="spid" jdbcType="INTEGER" property="spid" />
    <result column="imageName" jdbcType="VARCHAR" property="imagename" />
    <result column="language" jdbcType="INTEGER" property="language" />
    <result column="style" jdbcType="VARCHAR" property="style" />
    <result column="disable" jdbcType="INTEGER" property="disable" />
    <result column="brief" jdbcType="VARCHAR" property="brief" />
    <result column="icon" jdbcType="VARCHAR" property="icon" />
    <result column="lev" jdbcType="INTEGER" property="lev" />
  </resultMap>
 
    <select id="findGameinfoCount" parameterClass="java.util.Map" resultClass="java.lang.Integer" >
    select count(*) from gameinfo where 1=1
    	<isNotEmpty prepend="and" property="gamename">
				gameName like  CONCAT('%', #gamename#, '%') 
	   </isNotEmpty>
	   <isNotEmpty prepend="and" property="spid">
				spid = #spid#
	   </isNotEmpty>
  </select>
 
   <select id="findGameinfoList" parameterClass="java.util.Map" resultMap="gameinfoResult">
	  select * from gameinfo where 1=1
    	<isNotEmpty prepend="and" property="gamename">
				gameName like  CONCAT('%', #gamename#, '%') 
	   </isNotEmpty>
	   <isNotEmpty prepend="and" property="spid">
				spid = #spid# 
	   </isNotEmpty>
	   order by id desc limit #start#,#end#
  </select>
  
  <select id="findGameinfoAll" parameterClass="java.util.Map" resultMap="gameinfoResult">
	  select * from gameinfo
  </select>
  
  <select id="queryGameinfo" resultMap="gameinfoResult" parameterClass="java.lang.Integer" >
    select * from gameinfo where id = #id:INTEGER#
  </select>

  <delete id="deleteGameinfo" parameterClass="com.tcl.portal.domain.Gameinfo" >
    delete from gameinfo
    where id = #id:INTEGER#
  </delete>
  
  <insert id="saveGameinfo" parameterClass="com.tcl.portal.domain.Gameinfo" >
      insert into gameinfo (id, gameName, detailInfo, kindId, addTime, spid, imageName, language,
      style, disable, brief, icon, lev)
    values (#id:INTEGER#, #gamename:VARCHAR#, #detailinfo:VARCHAR#, #kindid:INTEGER#,
      #addtime:TIMESTAMP#, #spid:INTEGER#, #imagename:VARCHAR#, #language:INTEGER#, #style:VARCHAR#,
      #disable:INTEGER#, #brief:VARCHAR#, #icon:VARCHAR#, #lev:INTEGER#)
     <selectKey keyProperty="id" resultClass="java.lang.Integer">  
      SELECT @@IDENTITY AS ID  
     </selectKey>  
  </insert>
  <update id="updateGameinfo" parameterClass="com.tcl.portal.domain.Gameinfo" >
    update gameinfo
    set gameName = #gamename:VARCHAR#,
      detailInfo = #detailinfo:VARCHAR#,
      kindId = #kindid:INTEGER#,
      addTime = #addtime:TIMESTAMP#,
      spid = #spid:INTEGER#,
      imageName = #imagename:VARCHAR#,
      language = #language:INTEGER#,
      style = #style:VARCHAR#,
      disable = #disable:INTEGER#,
      brief = #brief:VARCHAR#,
      icon = #icon:VARCHAR#,
      lev = #lev:INTEGER#
    where id = #id:INTEGER#
  </update>
 
</sqlMap>